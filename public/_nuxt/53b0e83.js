(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{658:function(t,e,n){"use strict";n.d(e,"a",(function(){return v})),n.d(e,"b",(function(){return h})),n.d(e,"d",(function(){return _})),n.d(e,"c",(function(){return f}));var o,r,l,c,d=n(93),m=n(62),v=Object(m.a)(o||(o=Object(d.a)(["\n  query {\n    staffs {\n      id\n      name\n      role\n    }   \n  }\n"]))),h=Object(m.a)(r||(r=Object(d.a)(["\n  mutation ($input: StaffCreateInput!) {\n    createStaff(input: $input) {\n      id\n    }\n  }\n"]))),_=Object(m.a)(l||(l=Object(d.a)(["\n  mutation ($input: StaffUpdateInput!) {\n    updateStaff(input: $input) {\n      id\n    }\n  }\n"]))),f=Object(m.a)(c||(c=Object(d.a)(["\n  mutation($id: ID!) {\n    deleteStaff(id: $id) {\n      id\n    }\n  }\n"])))},661:function(t,e,n){"use strict";n.d(e,"b",(function(){return _})),n.d(e,"d",(function(){return f})),n.d(e,"c",(function(){return x})),n.d(e,"a",(function(){return C}));var o,r,l,c,d,m,v=n(93),h=n(62),_=(Object(h.a)(o||(o=Object(v.a)(["\n  query {\n    assetCustodians {\n      id\n    }   \n  }\n"]))),Object(h.a)(r||(r=Object(v.a)(["\n  mutation ($input: AssetCustodianCreateInput!) {\n    createAssetCustodian(input: $input) {\n      id\n    }\n  }\n"])))),f=Object(h.a)(l||(l=Object(v.a)(["\n  mutation ($input: AssetCustodianUpdateInput!) {\n    updateAssetCustodian(input: $input) {\n      id\n    }\n  }\n"]))),x=(Object(h.a)(c||(c=Object(v.a)(["\n  mutation($id: ID!) {\n    deleteAssetCustodian(id: $id) {\n      id\n    }\n  }\n"]))),Object(h.a)(d||(d=Object(v.a)(["\n  mutation($id: ID!) {\n    returnAsset(id: $id) {\n      id\n    }\n  }\n"])))),C=Object(h.a)(m||(m=Object(v.a)(["\n  mutation($id: ID!) {\n    approveAssetCustodian(id: $id) {\n      id\n    }\n  }\n"])))},671:function(t,e,n){"use strict";n.r(e);var o,r,l,c,d,m=n(655),v=n(279),h=n(232),_=n(650),f=n(274),x=n(651),C=n(194),y=n(652),D=n(613),A=n(125),k=n(812),w=(n(12),n(13),n(10),n(5),n(15),n(9),n(16),n(1)),O=(n(71),n(108)),S=n(291),j=n(14),$=n(20),I=n(93),P=n(62),R=(Object(P.a)(o||(o=Object(I.a)(["\n  query {\n    assetDisposals {\n      id\n      name\n      description\n    }   \n  }\n"]))),Object(P.a)(r||(r=Object(I.a)(["\n  query All_DISPOSAL_LOOKUP_QUERY {\n    disposalReasons {\n      id\n      name\n    }   \n    disposalTypes {\n      id\n      name\n    }\n    currencies {\n      id\n      name\n    }\n  }\n"])))),F=Object(P.a)(l||(l=Object(I.a)(["\n  mutation ($input: AssetDisposalCreateInput!) {\n    createAssetDisposal(input: $input) {\n      id\n    }\n  }\n"]))),N=Object(P.a)(c||(c=Object(I.a)(["\n  mutation ($input: AssetDisposalUpdateInput!) {\n    updateAssetDisposal(input: $input) {\n      id\n    }\n  }\n"])));Object(P.a)(d||(d=Object(I.a)(["\n  mutation($id: ID!) {\n    deleteAssetDisposal(id: $id) {\n      id\n    }\n  }\n"])));function V(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function T(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?V(Object(source),!0).forEach((function(e){Object(w.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):V(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var E={props:["_AssetDisposal","asset"],middleware:["authenticated"],data:function(){return{valid:!1,editMode:!1,assetDisposal:{},fieldRequiredRule:[function(t){return!!t||"This field is required"}],element_permissions:{edit_btn:[{resource:j.a.ASSET_DISPOSAL,action:$.a.UPDATE}]},disposalTypes:[],disposalReasons:[],currencies:[]}},apollo:{lookup:{query:R,fetchPolicy:"cache-and-network",update:function(data){return data}}},computed:{disableForm:function(){var t;return!this.editMode&&null!=(null===(t=this._AssetDisposal)||void 0===t?void 0:t.id)}},methods:T(T({},Object(O.b)({successNotification:"successNotification",errorNotification:"errorNotification",infoNotification:"infoNotification"})),{},{can:function(t){return Object(S.a)(this.$auth.user,t)},onFormSubmitted:function(t){this.$refs.form.validate()&&(this.editMode?this.updateAssetDisposal(t):this.registerAssetDisposal(t))},registerAssetDisposal:function(t){var e=this;this.assetDisposal.asset_id=this.asset.id,this.$apollo.mutate({mutation:F,variables:{input:this.assetDisposal}}).then((function(n){n.data;e.successNotification("Disposal type registered successfully!"),t.target.reset(),e.$emit("on-close-asset-disposal-form")})).catch((function(t){console.log(t)}))},updateAssetDisposal:function(t){var e=this;this.assetDisposal.id=parseInt(this.assetDisposal.id),this.$apollo.mutate({mutation:N,variables:{input:this.assetDisposal}}).then((function(n){n.data;e.successNotification("Disposal type updated successfully!"),t.target.reset(),e.$emit("on-close-asset-disposal-form")})).catch((function(t){console.log(t)}))}}),watch:{$props:{handler:function(){var t;null!==(t=this._AssetDisposal)&&void 0!==t&&t.id?(this.editMode=!1,this.assetDisposal=T({},this._AssetDisposal)):(this.editMode=!1,this.assetDisposal={})},deep:!0,immediate:!0},lookup:{handler:function(){var t,e,n;this.lookup&&(console.log(this.lookup),this.disposalReasons=null===(t=this.lookup)||void 0===t||null===(t=t.disposalReasons)||void 0===t?void 0:t.map((function(t){return t.id=parseInt(t.id),t})),this.disposalTypes=null===(e=this.lookup)||void 0===e||null===(e=e.disposalTypes)||void 0===e?void 0:e.map((function(t){return t.id=parseInt(t.id),t})),this.currencies=null===(n=this.lookup)||void 0===n||null===(n=n.currencies)||void 0===n?void 0:n.map((function(t){return t.id=parseInt(t.id),t})))}}}},M=n(50),component=Object(M.a)(E,(function(){var t=this,e=t._self._c;return e(v.a,[e("div",{staticClass:"blue lighten-1 white--text pa-2 pb-6"},[e(y.a,{staticClass:"mx-0"},[e("div",[e(h.c,{staticClass:"text-h5 pb-0"},[t._v("\n          Asset Disposal Registration Form\n        ")]),t._v(" "),e("span",{staticClass:"ml-4"},[t._v("registration form")])],1),t._v(" "),e(D.a),t._v(" "),t.disableForm&&t.can(t.element_permissions.edit_btn)?e("button",{staticClass:"v-btn ma-5 mt-6 v-btn--is-elevated v-btn--has-bg theme--light pl-1 black v-size--default white--text",attrs:{icon:"mdi-pen"},on:{click:function(e){t.editMode=!0}}},[e(C.a,{attrs:{right:"",dark:"",medium:""}},[t._v(" mdi-pen ")]),t._v(" "),e("span",{staticClass:"v-btn__content text-white ml-1"},[t._v(" Edit ")])],1):t._e()],1)],1),t._v(" "),e(x.a,{ref:"form",staticClass:"mt-4 pa-4",attrs:{disabled:t.disableForm},on:{submit:function(e){return e.preventDefault(),t.onFormSubmitted.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e("div",{staticClass:"mx-5"},[e(y.a,{staticClass:"px-3"},[e(_.a,{attrs:{cols:"12",md:"6"}},[e(A.a,{attrs:{label:"Date of Disposal",type:"date",outlined:"",required:"",rules:t.fieldRequiredRule},model:{value:t.assetDisposal.date,callback:function(e){t.$set(t.assetDisposal,"date",e)},expression:"assetDisposal.date"}})],1),t._v(" "),e(_.a,{attrs:{cols:"12",md:"6"}},[e(m.a,{attrs:{items:t.disposalReasons,"item-value":"id","item-text":"name",label:"Select Disposal Reason *",outlined:"",required:"",rules:t.fieldRequiredRule},model:{value:t.assetDisposal.disposal_reason_id,callback:function(e){t.$set(t.assetDisposal,"disposal_reason_id",t._n(e))},expression:"assetDisposal.disposal_reason_id"}})],1),t._v(" "),e(_.a,{attrs:{cols:"12",md:"8"}},[e(A.a,{attrs:{label:"Transfer To",outlined:"",required:"",rules:t.fieldRequiredRule},model:{value:t.assetDisposal.transfer_to,callback:function(e){t.$set(t.assetDisposal,"transfer_to",e)},expression:"assetDisposal.transfer_to"}})],1),t._v(" "),e(_.a,{attrs:{cols:"12",md:"4"}},[e(m.a,{attrs:{items:t.disposalTypes,"item-value":"id","item-text":"name",label:"Select Disposal Type *",outlined:"",required:"",rules:t.fieldRequiredRule},model:{value:t.assetDisposal.disposal_type_id,callback:function(e){t.$set(t.assetDisposal,"disposal_type_id",t._n(e))},expression:"assetDisposal.disposal_type_id"}})],1),t._v(" "),e(_.a,{attrs:{cols:"12",md:"4"}},[e(A.a,{attrs:{label:"Accumulated Depreciation (for Capital Assets ONLY)",outlined:"",required:"",rules:t.fieldRequiredRule},model:{value:t.assetDisposal.accumulated_depreciation,callback:function(e){t.$set(t.assetDisposal,"accumulated_depreciation",e)},expression:"assetDisposal.accumulated_depreciation"}})],1),t._v(" "),e(_.a,{attrs:{cols:"12",md:"4"}},[e(A.a,{attrs:{label:"Net book Value/ Replacement Cost",outlined:"",required:"",rules:t.fieldRequiredRule},model:{value:t.assetDisposal.replacement_cost,callback:function(e){t.$set(t.assetDisposal,"replacement_cost",e)},expression:"assetDisposal.replacement_cost"}})],1),t._v(" "),e(_.a,{attrs:{cols:"12",md:"4"}},[e(m.a,{attrs:{items:t.currencies,"item-value":"id","item-text":"name",label:"Select Currency *",outlined:"",required:"",rules:t.fieldRequiredRule},model:{value:t.assetDisposal.currency_id,callback:function(e){t.$set(t.assetDisposal,"currency_id",t._n(e))},expression:"assetDisposal.currency_id"}})],1),t._v(" "),e(_.a,{attrs:{cols:"12",md:"12"}},[e(k.a,{attrs:{label:"Description",outlined:"",required:""},model:{value:t.assetDisposal.remark,callback:function(e){t.$set(t.assetDisposal,"remark",e)},expression:"assetDisposal.remark"}})],1)],1)],1),t._v(" "),e(f.a,{staticClass:"my-2"}),t._v(" "),e(_.a,{staticClass:"d-flex"},[e("button",{staticClass:"v-btn mt-2 v-btn--is-elevated v-btn--has-bg theme--light v-size--default grey lighten-3",attrs:{type:"button"},on:{click:function(e){return t.$emit("on-close-asset-disposal-form")}}},[e("span",{staticClass:"v-btn__content text-white"},[t._v(" Cancel ")])]),t._v(" "),e(D.a),t._v(" "),t.editMode||t.disableForm?t._e():e("button",{staticClass:"v-btn mt-2 v-btn--is-elevated v-btn--has-bg theme--light v-size--default white--text",staticStyle:{background:"#262b40"},attrs:{type:"submit"}},[e("span",{staticClass:"v-btn__content text-white"},[t._v(" Add Disposal Reason ")])]),t._v(" "),t.editMode&&!t.disableForm?e("button",{staticClass:"v-btn mt-2 v-btn--is-elevated v-btn--has-bg theme--light v-size--default white--text",staticStyle:{background:"#262b40"},attrs:{type:"submit"}},[e("span",{staticClass:"v-btn__content text-white"},[t._v("\n          Update Disposal Reason\n        ")])]):t._e()],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},672:function(t,e,n){"use strict";n.r(e);var o=n(177),r=n(278),l=n(194),c=n(270),d=n(176),m=n(87),v=n(282),h=n(642),_=(n(13),n(88),n(5),n(98),n(38),n(14)),f=n(20),x=n(291),C={props:["assets","search","_pagination"],data:function(){return{pagination:{},element_permissions:{assign_btn:[{resource:_.a.ASSET,action:f.a.ASSIGN}],unassign_btn:[{resource:_.a.ASSET,action:f.a.UNASSIGN}],dispose_btn:[{resource:_.a.ASSET,action:f.a.DISPOSE}]}}},methods:{can:function(t){return Object(x.a)(this.$auth.user,t)},showDetail:function(t){this.$router.push({path:"/inventory/".concat(t.id,"/edit")})},binCard:function(t){this.$router.push({path:"/inventory/".concat(t.id,"/binCard")})}}},y=n(50),component=Object(y.a)(C,(function(){var t=this,e=t._self._c;return e(h.a,{staticClass:"blue-grey lighten-5",attrs:{responsive:""},scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",{staticClass:"blue lighten-1 white--text"},[e("th",{staticClass:"text-center"},[t._v("#")]),t._v(" "),e("th",{staticClass:"text-center white--text",staticStyle:{"min-width":"120px"}},[e("b",[t._v("Tag Number")])]),t._v(" "),e("th",{staticClass:"text-center white--text text-uppercase py-2",staticStyle:{"min-width":"150px"}},[e("b",[t._v("Acquisition Date")])]),t._v(" "),e("th",{staticClass:"text-center white--text text-uppercase py-2",staticStyle:{"min-width":"120px"}},[e("b",[t._v("Asset Type")])]),t._v(" "),e("th",{staticClass:"text-center white--text text-uppercase py-2",staticStyle:{"min-width":"120px"}},[e("b",[t._v("Item")])]),t._v(" "),e("th",{staticClass:"text-center white--text text-uppercase py-2",staticStyle:{"min-width":"120px"}},[e("b",[t._v("Description")])]),t._v(" "),e("th",{staticClass:"text-center white--text text-uppercase py-2",staticStyle:{"min-width":"120px"}},[e("b",[t._v("Assignee")])]),t._v(" "),e("th",{staticClass:"text-center white--text text-uppercase py-2",staticStyle:{"min-width":"120px"}},[e("b",[t._v("Serial/ Vin No")])]),t._v(" "),e("th",{staticClass:"text-center white--text text-uppercase py-2",staticStyle:{"min-width":"120px"}},[e("b",[t._v("Accessories")])]),t._v(" "),e("th",{staticClass:"text-center white--text text-uppercase py-2",staticStyle:{"min-width":"150px"}},[e("b",[t._v("Acquisition Cost")])]),t._v(" "),e("th",{staticClass:"text-center white--text text-uppercase py-2",staticStyle:{"min-width":"120px"}},[e("b",[t._v("Currency")])]),t._v(" "),e("th",{staticClass:"text-center white--text text-uppercase py-2",staticStyle:{"min-width":"120px"}},[e("b",[t._v("Depreciation Date")])]),t._v(" "),e("th",{staticClass:"text-center white--text text-uppercase py-2",staticStyle:{"min-width":"120px"}},[e("b",[t._v("Acquisition Type")])]),t._v(" "),e("th",{staticClass:"text-center white--text text-uppercase py-2",staticStyle:{"min-width":"120px"}},[e("b",[t._v("Purchase Order No")])]),t._v(" "),e("th",{staticClass:"text-center white--text text-uppercase py-2",staticStyle:{"min-width":"120px"}},[e("b",[t._v(" Project ")])]),t._v(" "),e("th",{staticClass:"text-center white--text text-uppercase py-2",staticStyle:{"min-width":"120px"}},[e("b",[t._v("GSRN No")])]),t._v(" "),e("th",{staticClass:"text-center white--text text-uppercase py-2",staticStyle:{"min-width":"120px"}},[e("b",[t._v("Receipt Date")])]),t._v(" "),e("th",{staticClass:"text-center white--text text-uppercase py-2",staticStyle:{"min-width":"120px"}},[e("b",[t._v("Donor")])]),t._v(" "),e("th",{staticClass:"text-center white--text text-uppercase py-2",staticStyle:{"min-width":"120px"}},[e("b",[t._v("Project")])]),t._v(" "),e("th",{staticClass:"text-center white--text text-uppercase py-2",staticStyle:{"min-width":"120px"}},[e("b",[t._v("Physical Location")])]),t._v(" "),e("th",{staticClass:"text-center white--text text-uppercase py-2",staticStyle:{"min-width":"120px"}},[e("b",[t._v("Cost Center")])])])]),t._v(" "),e("tbody",t._l(t.assets,(function(n){var h,_,f,x,C,y,D,A;return e("tr",{key:n.ID,class:{"red lighten-5":n.disposed}},[e("td",[e(v.a,{attrs:{transition:"slide-x-transition",bottom:"",right:""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,c=n.attrs;return[e(o.a,t._g(t._b({attrs:{icon:""}},"v-btn",c,!1),r),[e(l.a,[t._v("mdi-menu")])],1)]}}],null,!0)},[t._v(" "),e(c.a,{staticClass:"col-12 px-0"},[e(d.a,{on:{click:function(e){return t.$emit("on-asset-detail-clicked",n)}}},[e(l.a,{staticClass:"text-sm",attrs:{left:""}},[t._v("mdi-eye")]),t._v(" "),e(m.d,{staticClass:"pr-5"},[t._v("detail")])],1),t._v(" "),!n.disposed&&t.can(t.element_permissions.dispose_btn)?e(d.a,{staticClass:"red lighten-3",on:{click:function(e){return t.$emit("on-dispose-asset-clicked",n)}}},[e(l.a,{staticClass:"text-sm",attrs:{left:""}},[t._v("mdi-delete")]),t._v(" "),e(m.d,[t._v("Dispose")])],1):t._e()],1)],1)],1),t._v(" "),e("td",{staticClass:"text-center"},[e("a",{on:{click:function(e){return t.$emit("on-asset-detail-clicked",n)}}},[t._v(t._s(n.tag_number))])]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(n.acquisition_date))]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(n.asset_type))]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(n.item_name))]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(n.description))]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[null!=n&&n.assetCustodians&&null!=n&&n.assetCustodians.some((function(t){return!t.returned}))?e("div",[e(r.a,[e(l.a,{staticClass:"mr-1",staticStyle:{"font-size":"1.5em"}},[t._v("mdi-account")]),t._v("\n              "+t._s(null==n||null===(h=n.assetCustodians)||void 0===h||null===(h=h.find((function(t){return!t.returned})))||void 0===h||null===(h=h.staff)||void 0===h?void 0:h.name)+"\n              "),t.can(t.element_permissions.unassign_btn)?e(o.a,{attrs:{icon:""},on:{click:function(e){return t.$emit("on-delete-asset-assignee-clicked",n)}}},[e(l.a,{attrs:{color:"red"}},[t._v("mdi-delete")])],1):t._e()],1)],1):t.can(t.element_permissions.assign_btn)?e("div",[n.assigned?e(o.a,{staticClass:"primary",attrs:{icon:""}},[e(l.a,{staticClass:"white--text"},[t._v("mdi-question")])],1):e(o.a,{staticClass:"primary",attrs:{icon:""},on:{click:function(e){return t.$emit("on-assign-asset-clicked",n)}}},[e(l.a,{staticClass:"white--text"},[t._v("mdi-plus")])],1)],1):e("div",[e(r.a,[e(l.a,{staticClass:"mr-1",staticStyle:{"font-size":"1.1em"}},[t._v("mdi-help")]),t._v("\n              Not Assigned\n            ")],1)],1)]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(n.serial_no))]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(n.accessories))]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(n.acquisition_cost))]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(null==n||null===(_=n.currency)||void 0===_?void 0:_.code))]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(n.depreciation_date))]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(null==n||null===(f=n.acquisitionType)||void 0===f?void 0:f.name))]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(n.purchase_order_no))]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(null==n||null===(x=n.project)||void 0===x?void 0:x.name))]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(n.gsrn_no))]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(n.receipt_date))]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(null==n||null===(C=n.donor)||void 0===C?void 0:C.name))]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(null==n||null===(y=n.project)||void 0===y?void 0:y.name))]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(null==n||null===(D=n.programArea)||void 0===D?void 0:D.name))]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(null==n||null===(A=n.costCenter)||void 0===A?void 0:A.name))])])})),0)]},proxy:!0}])})}),[],!1,null,null,null);e.default=component.exports},673:function(t,e,n){"use strict";n.r(e);var o=n(655),r=n(279),l=n(232),c=n(650),d=n(274),m=n(651),v=n(194),h=n(652),_=n(613),f=n(812),x=(n(12),n(13),n(10),n(5),n(15),n(9),n(16),n(1)),C=(n(71),n(108)),y=n(291),D=n(14),A=n(20),k=n(661);function w(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function O(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(e){Object(x.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var S={props:["_assetCustodian","asset"],middleware:["authenticated"],data:function(){return{valid:!1,editMode:!1,assetCustodian:{},fieldRequiredRule:[function(t){return!!t||"This field is required"}],element_permissions:{edit_btn:[{resource:D.a.ASSET_CUSTODIAN,action:A.a.UPDATE}]},staffs:[]}},apollo:{staffs:{query:n(658).a,fetchPolicy:"cache-and-network",update:function(data){return data.staffs.map((function(t){return t.id=parseInt(t.id),t}))}}},computed:{disableForm:function(){var t;return!this.editMode&&null!=(null===(t=this._assetCustodian)||void 0===t?void 0:t.id)}},methods:O(O({},Object(C.b)({successNotification:"successNotification",errorNotification:"errorNotification",infoNotification:"infoNotification"})),{},{can:function(t){return Object(y.a)(this.$auth.user,t)},onFormSubmitted:function(t){this.$refs.form.validate()&&(this.editMode?this.updateAssetCustodian(t):this.registerAssetCustodian(t))},registerAssetCustodian:function(t){var e=this;this.assetCustodian.asset_id=this.asset.id,this.$apollo.mutate({mutation:k.b,variables:{input:this.assetCustodian}}).then((function(n){n.data;e.successNotification("Asset custodian registered successfully!"),t.target.reset(),e.$emit("on-close-asset-custodian-form")})).catch((function(t){console.log(t)}))},updateAssetCustodian:function(t){var e=this;this.assetCustodian.id=parseInt(this.assetCustodian.id),this.$apollo.mutate({mutation:k.d,variables:{input:this.assetCustodian}}).then((function(n){n.data;e.successNotification("Asset custodian updated successfully!"),t.target.reset(),e.$emit("on-close-asset-custodian-form")})).catch((function(t){console.log(t)}))}}),watch:{$props:{handler:function(){var t;null!==(t=this._AssetCustodian)&&void 0!==t&&t.id?(this.editMode=!1,this.assetCustodian=O({},this._AssetCustodian)):(this.editMode=!1,this.assetCustodian={})},deep:!0,immediate:!0}}},j=n(50),component=Object(j.a)(S,(function(){var t=this,e=t._self._c;return e(r.a,[e("div",{staticClass:"blue lighten-1 white--text pa-2 pb-6"},[e(h.a,{staticClass:"mx-0"},[e("div",[e(l.c,{staticClass:"text-h5 pb-0"},[t._v("\n          Asset Custodian Registration Form\n        ")]),t._v(" "),e("span",{staticClass:"ml-4"},[t._v("registration form")])],1),t._v(" "),e(_.a),t._v(" "),t.disableForm&&t.can(t.element_permissions.edit_btn)?e("button",{staticClass:"v-btn ma-5 mt-6 v-btn--is-elevated v-btn--has-bg theme--light pl-1 black v-size--default white--text",attrs:{icon:"mdi-pen"},on:{click:function(e){t.editMode=!0}}},[e(v.a,{attrs:{right:"",dark:"",medium:""}},[t._v(" mdi-pen ")]),t._v(" "),e("span",{staticClass:"v-btn__content text-white ml-1"},[t._v(" Edit ")])],1):t._e()],1)],1),t._v(" "),e(m.a,{ref:"form",staticClass:"mt-4 pa-4",attrs:{disabled:t.disableForm},on:{submit:function(e){return e.preventDefault(),t.onFormSubmitted.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e("div",{staticClass:"mx-5"},[e(h.a,{staticClass:"px-3"},[e(c.a,{staticClass:"py-0",attrs:{cols:"12",md:"9"}},[e(o.a,{attrs:{items:t.staffs,"item-value":"id","item-text":"name",label:"Select Staff *",outlined:"",required:"",rules:t.fieldRequiredRule},model:{value:t.assetCustodian.staff_id,callback:function(e){t.$set(t.assetCustodian,"staff_id",t._n(e))},expression:"assetCustodian.staff_id"}})],1),t._v(" "),e(c.a,{attrs:{cols:"12",md:"12"}},[e(f.a,{attrs:{label:"Description",outlined:"",required:""},model:{value:t.assetCustodian.remark,callback:function(e){t.$set(t.assetCustodian,"remark",e)},expression:"assetCustodian.remark"}})],1)],1)],1),t._v(" "),e(d.a,{staticClass:"my-2"}),t._v(" "),e(c.a,{staticClass:"d-flex"},[e("button",{staticClass:"v-btn mt-2 v-btn--is-elevated v-btn--has-bg theme--light v-size--default grey lighten-3",attrs:{type:"button"},on:{click:function(e){return t.$emit("on-close-asset-custodian-form")}}},[e("span",{staticClass:"v-btn__content text-white"},[t._v(" Cancel ")])]),t._v(" "),e(_.a),t._v(" "),t.editMode||t.disableForm?t._e():e("button",{staticClass:"v-btn mt-2 v-btn--is-elevated v-btn--has-bg theme--light v-size--default white--text",staticStyle:{background:"#262b40"},attrs:{type:"submit"}},[e("span",{staticClass:"v-btn__content text-white"},[t._v(" Add Custodian Reason ")])]),t._v(" "),t.editMode&&!t.disableForm?e("button",{staticClass:"v-btn mt-2 v-btn--is-elevated v-btn--has-bg theme--light v-size--default white--text",staticStyle:{background:"#262b40"},attrs:{type:"submit"}},[e("span",{staticClass:"v-btn__content text-white"},[t._v("\n          Update Custodian Reason\n        ")])]):t._e()],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},823:function(t,e,n){"use strict";n.r(e);var o=n(655),r=n(628),l=n(177),c=n(279),d=n(232),m=n(650),v=n(616),h=n(274),_=n(194),f=n(657),x=n(613),C=n(125),y=(n(35),n(292),n(12),n(13),n(10),n(5),n(15),n(9),n(16),n(1)),D=(n(33),n(71),n(672)),A=n(653),k=n(20),w=n(291),O=n(14),S=n(671),j=n(673),$=n(805),I=n(299),P=n(661),R=n(108);function F(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function N(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?F(Object(source),!0).forEach((function(e){Object(y.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):F(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var V={components:{AssetTable:D.default,AssetDisposalForm:S.default,AssetCustodianForm:j.default,AssetImportForm:$.default,QrCodeScanner:I.default},middleware:["authenticated"],data:function(){return{breadcrumbs:[{text:"Dashboard",disabled:!1,href:"/dashboard"},{text:"All Assets",disabled:!0}],assets:{paginatorInfo:{}},asset:{},search:{customer_name:"",concrete_type_id:null},element_permissions:{create_btn:[{resource:O.a.ASSET,action:k.a.CREATE}]},loading:!0,pagination:{page:1,per_page:25},disposalFormDialogVisible:!1,custodianFormDialogVisible:!1,importDialogVisible:!1,uploading:!1,qrScanDialogVisible:!1,deleteAssetAssigneeDialogVisible:!1,donors:[],staffs:[],programAreas:[],acquisitionTypes:[],conditions:[]}},apollo:{assets:{query:A.b,loadingKey:"loading",variables:function(){var t,e={};return this.search.program_area_id&&(e=N(N({},e),{program_area_id:this.search.program_area_id})),this.search.acquisition_type_id&&(e=N(N({},e),{acquisition_type_id:this.search.acquisition_type_id})),this.search.donor_id&&(e=N(N({},e),{donor_id:this.search.donor_id})),this.search.staff_id&&(e=N(N({},e),{staff_id:this.search.staff_id})),this.search.condition_id&&(e=N(N({},e),{condition_id:this.search.condition_id})),this.search.search&&(e=N(N({},e),{search:"".concat(this.search.search)})),N(N({},e),{page:this.pagination.page,per_page:this.pagination.per_page,project_id:null===(t=this.$auth)||void 0===t||null===(t=t.user)||void 0===t||null===(t=t.project)||void 0===t?void 0:t.id})},fetchPolicy:"cache-and-network"},lookup:{query:A.c,fetchPolicy:"cache-and-network",update:function(data){return data}}},methods:N(N({},Object(R.b)({successNotification:"successNotification",errorNotification:"errorNotification",infoNotification:"infoNotification"})),{},{can:function(t){return Object(w.a)(this.$auth.user,t)},onAssetDetailClicked:function(t){this.$router.push("/asset/"+t.id+"/detail")},onDisposeAssetClicked:function(t){this.asset=t,this.disposalFormDialogVisible=!0},closeDisposalForm:function(t){this.asset=null,this.disposalFormDialogVisible=!1,this.$apollo.queries.assets.refetch()},onAssignAssetClicked:function(t){console.log(t),this.asset=t,this.custodianFormDialogVisible=!0},closeAssetCustodianForm:function(t){this.asset=null,this.custodianFormDialogVisible=!1,this.$apollo.queries.assets.refetch()},closeQrCodeScannerDIalog:function(t){this.qrScanDialogVisible=!1,t&&(this.search=N(N({},this.search),{},{search:t}))},closeImportDialog:function(){this.importDialogVisible=!1},onImportSuccess:function(){this.$apollo.queries.assets.refetch()},onUploading:function(t){this.uploading=t},onDeleteAssetAssigneeClicked:function(t){this.asset=t,this.deleteAssetAssigneeDialogVisible=!0},onCloseAssetAssigneeClicked:function(t){this.asset=null,this.deleteAssetAssigneeDialogVisible=!1,this.$apollo.queries.assets.refetch()},returnAsset:function(){var t=this;this.$apollo.mutate({mutation:P.c,variables:{id:this.asset.id}}).then((function(e){e.data;t.$apollo.queries.assets.refetch(),t.successNotification("Custodian removed!")})).catch((function(e){t.errorNotification("Error!  Make sure related resource doesn't exist!"),console.log(e)})),this.asset=null,this.deleteAssetAssigneeDialogVisible=!1},exportReport:function(){var t,e,n,o,r,l,c,d=null;c=this.search.project_id?this.search.project_id:null===(t=this.$auth)||void 0===t||null===(t=t.user)||void 0===t||null===(t=t.project)||void 0===t?void 0:t.id,this.search.staff_id&&(d=this.search.staff_id),window.open("http://196.189.187.217/asset-report?search=\n        ".concat(null!==(e=this.search.search)&&void 0!==e?e:"","&staff_id=").concat(null!==(n=d)&&void 0!==n?n:"","&project_id=").concat(null!==(o=c)&&void 0!==o?o:"","&stock_type_id=").concat(null!==(r=this.search.stock_type_id)&&void 0!==r?r:"","&donor_id=").concat(null!==(l=this.search.donor_id)&&void 0!==l?l:""),"_blank")}}),watch:{lookup:{handler:function(){this.lookup&&(this.donors=this.lookup.donors.map((function(t){return t.id=parseInt(t.id),t})),this.staffs=this.lookup.staffs.map((function(t){return t.id=parseInt(t.id),t})),this.acquisitionTypes=this.lookup.acquisitionTypes.map((function(t){return t.id=parseInt(t.id),t})),this.programAreas=this.lookup.programAreas.map((function(t){return t.id=parseInt(t.id),t})),this.conditions=this.lookup.conditions.map((function(t){return t.id=parseInt(t.id),t})))}}}},T=n(50),component=Object(T.a)(V,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"pa-5 grey lighten-3"},[e(r.a,{attrs:{assets:t.breadcrumbs},scopedSlots:t._u([{key:"divider",fn:function(){return[e(_.a,[t._v("mdi-chevron-double-right")])]},proxy:!0}])}),t._v(" "),e("div",{staticClass:"px-4 row ma-1"},[t._m(0),t._v(" "),e(x.a),t._v(" "),e("div",{staticClass:"pr-2"},[e(l.a,{staticClass:"blue-grey darken-3 white--text mt-7 mr-4 py-3",on:{click:t.exportReport}},[e(_.a,{attrs:{left:""}},[t._v("mdi-printer")]),t._v("\n        Export\n      ")],1),t._v(" "),e(l.a,{staticClass:"success white--text mt-7 mr-4 py-3",on:{click:function(e){t.importDialogVisible=!0}}},[e(_.a,{attrs:{left:""}},[t._v("mdi-file-upload")]),t._v("\n        Import\n      ")],1),t._v(" "),e(l.a,{staticClass:"blue-grey darken-3 white--text mt-7 mr-4 py-3",on:{click:function(e){t.qrScanDialogVisible=!0}}},[e(_.a,{attrs:{left:""}},[t._v("mdi-barcode")]),t._v("\n        SCAN\n      ")],1)],1)],1),t._v(" "),e("div",{staticClass:"px-5 py-3 mt-5"},[e("div",{staticClass:"row mb-4"},[e(m.a,{staticClass:"py-0",attrs:{cols:"12",md:"4"}},[e(C.a,{staticClass:"py-0",attrs:{dense:"",label:"Start Typing To Search",outlined:"",required:""},model:{value:t.search.search,callback:function(e){t.$set(t.search,"search",e)},expression:"search.search"}})],1),t._v(" "),e(m.a,{staticClass:"py-0",attrs:{cols:"12",md:"4"}},[e(o.a,{attrs:{dense:"",clearable:"",items:t.donors,"item-value":"id","item-text":"name",label:"Select Donor",outlined:"",required:""},model:{value:t.search.donor_id,callback:function(e){t.$set(t.search,"donor_id",t._n(e))},expression:"search.donor_id"}})],1),t._v(" "),e(m.a,{staticClass:"py-0",attrs:{cols:"12",md:"4"}},[e(o.a,{attrs:{dense:"",clearable:"",items:t.programAreas,"item-value":"id","item-text":"name",label:"Select Program Area",outlined:"",required:""},model:{value:t.search.program_area_id,callback:function(e){t.$set(t.search,"program_area_id",t._n(e))},expression:"search.program_area_id"}})],1),t._v(" "),e(m.a,{staticClass:"py-0",attrs:{cols:"12",md:"4"}},[e(o.a,{attrs:{dense:"",clearable:"",items:t.acquisitionTypes,"item-value":"id","item-text":"name",label:"Select Acquisition Type",outlined:""},model:{value:t.search.acquisition_type_id,callback:function(e){t.$set(t.search,"acquisition_type_id",t._n(e))},expression:"search.acquisition_type_id"}})],1),t._v(" "),e(m.a,{staticClass:"py-0",attrs:{cols:"12",md:"4"}},[e(o.a,{attrs:{dense:"",clearable:"",items:t.staffs,"item-value":"id","item-text":"name",label:"Select Staff",outlined:""},model:{value:t.search.staff_id,callback:function(e){t.$set(t.search,"staff_id",t._n(e))},expression:"search.staff_id"}})],1),t._v(" "),e(m.a,{staticClass:"py-0",attrs:{cols:"12",md:"4"}},[e(o.a,{attrs:{dense:"",clearable:"",items:t.conditions,"item-value":"id","item-text":"name",label:"Select Asset Condition",outlined:""},model:{value:t.search.condition_id,callback:function(e){t.$set(t.search,"condition_id",t._n(e))},expression:"search.condition_id"}})],1)],1),t._v(" "),e(c.a,{staticClass:"mt-0"},[e("asset-table",{attrs:{loading:t.loading,assets:t.assets.data,_pagination:t.assets.paginatorInfo},on:{"on-assign-asset-clicked":t.onAssignAssetClicked,"on-asset-detail-clicked":t.onAssetDetailClicked,"on-delete-asset-assignee-clicked":t.onDeleteAssetAssigneeClicked,"on-dispose-asset-clicked":t.onDisposeAssetClicked}})],1),t._v(" "),e(f.a,{staticClass:"my-4",attrs:{length:t.assets.paginatorInfo.lastPage},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1),t._v(" "),e("div",[e(v.a,{attrs:{width:"80%"},on:{"click:outside":t.closeDisposalForm},model:{value:t.disposalFormDialogVisible,callback:function(e){t.disposalFormDialogVisible=e},expression:"disposalFormDialogVisible"}},[e("asset-disposal-form",{attrs:{asset:t.asset},on:{"on-close-asset-disposal-form":t.closeDisposalForm}})],1),t._v(" "),e(v.a,{attrs:{width:"60%"},on:{"click:outside":t.closeAssetCustodianForm},model:{value:t.custodianFormDialogVisible,callback:function(e){t.custodianFormDialogVisible=e},expression:"custodianFormDialogVisible"}},[e("asset-custodian-form",{attrs:{asset:t.asset},on:{"on-close-asset-custodian-form":t.closeAssetCustodianForm}})],1)],1),t._v(" "),e(v.a,{attrs:{width:"auto"},on:{"click:outside":t.closeQrCodeScannerDIalog},model:{value:t.qrScanDialogVisible,callback:function(e){t.qrScanDialogVisible=e},expression:"qrScanDialogVisible"}},[e("qr-code-scanner",{on:{"on-close-qr-code-scanner":t.closeQrCodeScannerDIalog}})],1),t._v(" "),e(v.a,{attrs:{"max-width":"600px",persistent:t.uploading},model:{value:t.importDialogVisible,callback:function(e){t.importDialogVisible=e},expression:"importDialogVisible"}},[e("asset-import-form",{on:{"on-close-import-form":t.closeImportDialog,"on-import-success":t.onImportSuccess,uploading:t.onUploading}})],1),t._v(" "),e(v.a,{attrs:{width:"500"},model:{value:t.deleteAssetAssigneeDialogVisible,callback:function(e){t.deleteAssetAssigneeDialogVisible=e},expression:"deleteAssetAssigneeDialogVisible"}},[e(c.a,{staticClass:"green lighten-4"},[e(d.c,{staticClass:"text-h5 green lighten-2"},[t._v(" Confirm ")]),t._v(" "),e(d.b,{staticClass:"pt-3"},[t._v("\n        Confirm Asset Return Action \n      ")]),t._v(" "),e(h.a),t._v(" "),e(d.a,[e(x.a),t._v(" "),e(l.a,{attrs:{color:"primary",outlined:""},on:{click:t.returnAsset}},[t._v(" I confirm ")])],1)],1)],1)],1)}),[function(){var t=this,e=t._self._c;return e("div",[e("p",{staticClass:"ma-0 text-lg transition-swing text-h4"},[t._v("All Assets")]),t._v(" "),e("span",{staticClass:"grey--text text--darken-1"},[t._v("All Assets Are Shown Here.")])])}],!1,null,null,null);e.default=component.exports}}]);