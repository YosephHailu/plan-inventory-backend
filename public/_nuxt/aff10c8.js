(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{632:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return C})),n.d(e,"e",(function(){return y})),n.d(e,"b",(function(){return w})),n.d(e,"f",(function(){return k})),n.d(e,"d",(function(){return O}));var r,o,l,c,d,m,f,v,_=n(93),x=n(62),h=Object(x.a)(r||(r=Object(_.a)(["\n  query($page: Int!, $per_page: Int!, $name: String) {\n    items(first: $per_page, page: $page, name: $name) {\n      data {\n        id\n        name\n        item_code\n        description\n      }\n      paginatorInfo {\n        count\n        currentPage\n        total\n        lastPage\n        perPage\n      }\n    }   \n  }\n"]))),C=(Object(x.a)(o||(o=Object(_.a)(["\n  query All_ITEM_LOOKUP_QUERY {\n    itemCategories {\n      id\n      name\n    }   \n    donors {\n      id\n      name\n    }  \n    lotNumbers {\n      id\n      lot_number\n    }   \n    unitOfMeasurements {\n      id\n      name\n      abbreviation\n    }  \n    officeLocations {\n      id\n      address\n    } \n    stockTypes {\n      id\n      name\n    }   \n    whereHouses {\n      id\n      name\n      address\n    }     \n    departments {\n      id\n      name\n    }   \n  }\n"]))),Object(x.a)(l||(l=Object(_.a)(["\n  query FIND_ITEM_QUERY($id: ID!) {\n    item(id: $id) {\n        id\n        name\n        item_code\n        description\n    }   \n  }\n"])))),y=Object(x.a)(c||(c=Object(_.a)(["\n  query ITEM_BIN_CARD_QUERY($id: ID!, $date_from: Date, $date_to: Date) {\n    itemBinCard(id: $id, date_from: $date_from, date_to: $date_to) {\n      stockIssueItems {\n        id\n        quantity\n        stockIssue {\n          id\n          date\n          created_at\n          createdBy {\n            id\n            name\n          }\n          stockRequest {\n            id\n            reference_no\n          }\n        }\n      }\n      goodReceiveItem {\n        id\n          received_quantity\n          checked_quantity\n          approved_quantity\n          description\n          expiry_date\n          comment\n          condition\n          unit_price\n          created_at\n          unitOfMeasurement {\n            id\n            abbreviation\n          }\n          donor {\n            id\n            name\n          }\n          stockType {\n            id\n            name\n          }\n          project {\n            id\n            name\n          }\n          goodReceive {\n            id\n            remark\n            status\n            received_by\n            received_date\n            reference_number\n            batch_number\n            loading_number\n            itemCategory {\n              id\n              name\n            }\n            projectObject {\n              id\n              name\n            }\n            createdBy {\n              id\n              name\n            }\n          }\n          item {\n            id\n            name\n            description\n          }\n      }\n    }   \n  }\n"]))),w=Object(x.a)(d||(d=Object(_.a)(["\n  mutation ($input: ItemCreateInput!) {\n    createItem(input: $input) {\n      id\n    }\n  }\n"]))),k=Object(x.a)(m||(m=Object(_.a)(["\n  mutation ($input: ItemUpdateInput!) {\n    updateItem(input: $input) {\n      id\n    }\n  }\n"]))),O=(Object(x.a)(f||(f=Object(_.a)(["\n  mutation($id: ID!) {\n    deleteItem(id: $id) {\n      id\n    }\n  }\n"]))),Object(x.a)(v||(v=Object(_.a)(["\n  mutation IMPORT_ITEM_MUTATION($file: Upload!) {\n    importItem(file: $file) {\n      success\n      message\n      stats {\n        total_rows\n        imported\n        failed\n        errors\n      }\n    }\n  }\n"]))))},706:function(t,e,n){var content=n(791);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(22).default)("d13b6bc6",content,!0,{sourceMap:!1})},790:function(t,e,n){"use strict";n(706)},791:function(t,e,n){var r=n(21)((function(i){return i[1]}));r.push([t.i,".professional-modal[data-v-23252fb4]{border-radius:8px;overflow:hidden}.modal-header[data-v-23252fb4]{background:linear-gradient(180deg,#fafafa 0,#fff);border-bottom:1px solid #e0e0e0}.info-card[data-v-23252fb4]{background:#f5f9ff;border-color:#bbdefb}.step-section[data-v-23252fb4]{position:relative}.step-badge[data-v-23252fb4]{background:linear-gradient(135deg,#1976d2,#1565c0);border-radius:50%;box-shadow:0 2px 4px rgba(25,118,210,.3);color:#fff;display:inline-flex;font-size:12px;font-weight:600;height:24px;width:24px}.drop-zone[data-v-23252fb4],.step-badge[data-v-23252fb4]{align-items:center;justify-content:center}.drop-zone[data-v-23252fb4]{background:#fafafa;border:2px dashed #bdbdbd;border-radius:8px;cursor:pointer;display:flex;min-height:200px;padding:32px;text-align:center;transition:all .3s ease}.drop-zone[data-v-23252fb4]:hover{background:#f5f9ff;border-color:#1976d2}.drop-zone-active[data-v-23252fb4]{background:linear-gradient(135deg,#e3f2fd,#f5f9ff);border-color:#1976d2;border-style:solid;box-shadow:0 4px 12px rgba(25,118,210,.2);transform:scale(1.01)}.drop-zone-has-file[data-v-23252fb4]{background:#f1f8f4;border-color:#4caf50;border-style:solid}.drop-zone-content[data-v-23252fb4]{width:100%}.selected-file[data-v-23252fb4]{align-items:center;display:flex;flex-direction:column}.d-none[data-v-23252fb4]{display:none!important}.progress-card[data-v-23252fb4]{animation:pulse-23252fb4 2s ease-in-out infinite;background:#f5f9ff;border-color:#bbdefb}@keyframes pulse-23252fb4{0%,to{opacity:1}50%{opacity:.95}}.result-card[data-v-23252fb4]{box-shadow:0 2px 8px rgba(0,0,0,.15)}.stat-card[data-v-23252fb4]{border:1px solid #e0e0e0;transition:all .3s ease}.stat-card[data-v-23252fb4]:hover{box-shadow:0 4px 12px rgba(0,0,0,.1);transform:translateY(-2px)}.stat-number[data-v-23252fb4]{font-size:32px;font-weight:700;line-height:1;margin:8px 0 4px}.stat-title[data-v-23252fb4]{color:#424242;font-size:12px;font-weight:600;margin-bottom:2px}.stat-subtitle[data-v-23252fb4]{color:#757575;font-size:11px}.error-card[data-v-23252fb4]{border:1px solid #ffcdd2}.error-list[data-v-23252fb4]{max-height:240px;overflow-y:auto}.error-list[data-v-23252fb4]::-webkit-scrollbar{width:6px}.error-list[data-v-23252fb4]::-webkit-scrollbar-track{background:#f5f5f5}.error-list[data-v-23252fb4]::-webkit-scrollbar-thumb{background:#bdbdbd;border-radius:3px}.error-list[data-v-23252fb4]::-webkit-scrollbar-thumb:hover{background:#9e9e9e}.error-item[data-v-23252fb4]{border-bottom:1px solid #f5f5f5;transition:background .2s ease}.error-item[data-v-23252fb4]:last-child{border-bottom:none}.error-item[data-v-23252fb4]:hover{background:#fafafa}.v-btn.text-none[data-v-23252fb4]{font-weight:500;letter-spacing:.3px;text-transform:none}.v-tooltip__content[data-v-23252fb4]{font-size:12px;padding:4px 8px}.v-fade-transition-enter-active[data-v-23252fb4],.v-fade-transition-leave-active[data-v-23252fb4]{transition:opacity .3s ease}.v-fade-transition-enter[data-v-23252fb4],.v-fade-transition-leave-to[data-v-23252fb4]{opacity:0}",""]),r.locals={},t.exports=r},808:function(t,e,n){"use strict";n.r(e);var r=n(272),o=n(177),l=n(279),c=n(232),d=n(278),m=n(650),f=n(274),v=n(91),_=n(682),x=n(194),h=n(275),C=n(277),y=n(652),w=(n(38),n(53),n(12),n(13),n(10),n(5),n(15),n(9),n(16),n(30)),k=n(1),O=(n(99),n(45),n(298),n(108)),R=n(632);function I(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function j(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?I(Object(source),!0).forEach((function(e){Object(k.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):I(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var D={data:function(){return{file:null,uploading:!1,downloadingTemplate:!1,importResult:null,isDragging:!1,fileRules:[function(t){return!!t||"File is required"},function(t){return!t||t.size<1e7||"File size should be less than 10 MB!"},function(t){return!t||["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(t.type)||"File must be an Excel file (.xlsx or .xls)"}]}},methods:j(j({},Object(O.b)({successNotification:"successNotification",errorNotification:"errorNotification",infoNotification:"infoNotification"})),{},{onFileSelected:function(t){this.importResult=null,this.isDragging=!1},onFileDrop:function(t){this.isDragging=!1;var e=t.dataTransfer.files;if(e.length>0){var n=e[0];if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(n.type)&&!n.name.endsWith(".xlsx")&&!n.name.endsWith(".xls"))return void this.errorNotification("Please upload an Excel file (.xlsx or .xls)");if(n.size>1e7)return void this.errorNotification("File size must be less than 10 MB");this.file=n,this.importResult=null}},removeFile:function(){this.file=null,this.importResult=null},formatFileSize:function(t){if(0===t)return"0 Bytes";var i=Math.floor(Math.log(t)/Math.log(1024));return Math.round(t/Math.pow(1024,i)*100)/100+" "+["Bytes","KB","MB"][i]},downloadTemplate:function(){var t=this;return Object(w.a)(regeneratorRuntime.mark((function e(){var n,link;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.downloadingTemplate=!0;try{n="http://196.189.187.217",console.log(n,"baseUrl"),(link=document.createElement("a")).href="".concat(n,"/api/item-import-template"),link.download="item-import-template.xlsx",link.target="_blank",document.body.appendChild(link),link.click(),document.body.removeChild(link)}catch(e){t.errorNotification("Failed to download template. Please try again."),console.error(e)}finally{t.downloadingTemplate=!1}case 2:case"end":return e.stop()}}),e)})))()},uploadFile:function(){var t=this;return Object(w.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.file){e.next=3;break}return t.errorNotification("Please select a file first"),e.abrupt("return");case 3:return t.uploading=!0,t.importResult=null,t.$emit("uploading",!0),e.prev=6,e.next=9,t.$apollo.mutate({mutation:R.d,variables:{file:t.file},context:{hasUpload:!0}});case 9:n=e.sent,t.importResult=n.data.importItem,t.importResult.success?(t.successNotification(t.importResult.message),t.$emit("on-import-success")):t.infoNotification(t.importResult.message),e.next=21;break;case 14:e.prev=14,e.t0=e.catch(6),console.error("Import error:",e.t0),r="Failed to import items.",e.t0.graphQLErrors&&e.t0.graphQLErrors.length>0?r=e.t0.graphQLErrors[0].message:e.t0.message&&(r=e.t0.message),t.errorNotification(r),t.importResult={success:!1,message:r,stats:{total_rows:0,imported:0,failed:0,errors:[]}};case 21:return e.prev=21,t.uploading=!1,t.$emit("uploading",!1),e.finish(21);case 25:case"end":return e.stop()}}),e,null,[[6,14,21,25]])})))()},resetForm:function(){this.file=null,this.importResult=null,this.uploading=!1},closeDialog:function(){this.resetForm(),this.$emit("on-close-import-form")}})},z=(n(790),n(50)),component=Object(z.a)(D,(function(){var t=this,e=t._self._c;return e(l.a,{staticClass:"professional-modal",attrs:{elevation:"3"}},[e("div",{staticClass:"modal-header"},[e("div",{staticClass:"d-flex align-center justify-space-between pa-5 pb-4"},[e("div",{staticClass:"d-flex align-center"},[e(r.a,{staticClass:"mr-3",attrs:{color:"primary",size:"36"}},[e(x.a,{attrs:{color:"white",size:"20"}},[t._v("mdi-file-upload")])],1),t._v(" "),e("div",[e("h3",{staticClass:"text-subtitle-1 font-weight-medium mb-0"},[t._v("Item Bulk Import")]),t._v(" "),e("p",{staticClass:"text-caption grey--text mb-0"},[t._v("Import multiple items from Excel spreadsheet")])])],1),t._v(" "),e(o.a,{attrs:{icon:""},on:{click:t.closeDialog}},[e(x.a,[t._v("mdi-close")])],1)],1)]),t._v(" "),e(f.a),t._v(" "),e(c.b,{staticClass:"pa-5"},[e(l.a,{staticClass:"info-card mb-4",attrs:{outlined:""}},[e(c.b,{staticClass:"pa-3"},[e("div",{staticClass:"d-flex align-start"},[e("div",[e("p",{staticClass:"text-caption font-weight-medium mb-1"},[t._v("Before you start:")]),t._v(" "),e("p",{staticClass:"text-caption grey--text text--darken-1 mb-0",staticStyle:{"line-height":"1.5"}},[e("i",[e("ul",[e("li",[t._v("Download the template")]),t._v(" "),e("li",[t._v("Fill it with your item data")]),t._v(" "),e("li",[t._v("Upload it below")]),t._v(" "),e("li",[t._v("Column A: Name (Required)")]),t._v(" "),e("li",[t._v("Column B: Item Code (Required)")]),t._v(" "),e("li",[t._v("Column C: Description (Optional)")])])])])])])])],1),t._v(" "),e("div",{staticClass:"step-section mb-5"},[e("div",{staticClass:"d-flex align-center mb-3"},[e("span",{staticClass:"step-badge mr-2"},[t._v("1")]),t._v(" "),e("span",{staticClass:"text-body-2 font-weight-medium"},[t._v("Download Excel Template")])]),t._v(" "),e(o.a,{staticClass:"text-none",attrs:{outlined:"",color:"primary",loading:t.downloadingTemplate,block:"",large:""},on:{click:t.downloadTemplate}},[e(x.a,{attrs:{left:"",size:"20"}},[t._v("mdi-download")]),t._v("\n        Download Template\n      ")],1)],1),t._v(" "),e(f.a,{staticClass:"my-5"}),t._v(" "),e("div",{staticClass:"step-section mb-4"},[e("div",{staticClass:"d-flex align-center mb-3"},[e("span",{staticClass:"step-badge mr-2"},[t._v("2")]),t._v(" "),e("span",{staticClass:"text-body-2 font-weight-medium"},[t._v("Upload Completed File")])]),t._v(" "),e("div",{staticClass:"drop-zone",class:{"drop-zone-active":t.isDragging,"drop-zone-has-file":t.file},on:{drop:function(e){return e.preventDefault(),t.onFileDrop.apply(null,arguments)},dragover:function(e){e.preventDefault(),t.isDragging=!0},dragenter:function(e){e.preventDefault(),t.isDragging=!0},dragleave:function(e){e.preventDefault(),t.isDragging=!1},click:function(e){return t.$refs.fileInput.$refs.input.click()}}},[e("div",{staticClass:"drop-zone-content"},[e(x.a,{staticClass:"mb-3",attrs:{color:t.file?"success":t.isDragging?"primary":"grey",size:"48"}},[t._v("\n            "+t._s(t.file?"mdi-file-check":t.isDragging?"mdi-download":"mdi-cloud-upload-outline")+"\n          ")]),t._v(" "),t.file?e("div",{staticClass:"selected-file"},[e(d.a,{staticClass:"mb-2",attrs:{color:"success","text-color":"white"}},[e(x.a,{attrs:{left:"",small:""}},[t._v("mdi-file-excel")]),t._v("\n              "+t._s(t.file.name)+"\n            ")],1),t._v(" "),e("p",{staticClass:"text-caption grey--text mb-0"},[t._v("\n              "+t._s(t.formatFileSize(t.file.size))+"\n            ")]),t._v(" "),e(o.a,{staticClass:"mt-2 text-none",attrs:{"x-small":"",text:"",color:"error"},on:{click:function(e){return e.stopPropagation(),t.removeFile.apply(null,arguments)}}},[t._v("\n              Remove\n            ")])],1):e("div",[e("p",{staticClass:"text-body-2 font-weight-medium mb-1"},[t._v("\n              "+t._s(t.isDragging?"Drop file here":"Drag & drop your file here")+"\n            ")]),t._v(" "),e("p",{staticClass:"text-caption grey--text mb-2"},[t._v("or")]),t._v(" "),e(o.a,{staticClass:"text-none",attrs:{small:"",color:"primary",outlined:""}},[t._v("\n              Browse Files\n            ")]),t._v(" "),e("p",{staticClass:"text-caption grey--text mt-3 mb-0"},[t._v("\n              Supported: .xlsx, .xls â€¢ Max size: 10MB\n            ")])],1)],1)]),t._v(" "),e(_.a,{ref:"fileInput",staticClass:"d-none",attrs:{accept:".xlsx,.xls",rules:t.fileRules},on:{change:t.onFileSelected},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}}),t._v(" "),e(o.a,{staticClass:"mt-4 text-none",attrs:{color:"primary",loading:t.uploading,disabled:!t.file||t.uploading,elevation:"2",block:"",large:""},on:{click:t.uploadFile}},[e(x.a,{attrs:{left:"",size:"20"}},[t._v("mdi-upload")]),t._v("\n        "+t._s(t.uploading?"Importing Items...":"Start Import")+"\n      ")],1)],1),t._v(" "),e(v.c,[t.uploading?e(l.a,{staticClass:"progress-card pa-4 mb-4",attrs:{outlined:""}},[e("div",{staticClass:"d-flex align-center"},[e(h.a,{staticClass:"mr-3",attrs:{indeterminate:"",color:"primary",size:"32",width:"3"}}),t._v(" "),e("div",{staticClass:"flex-grow-1"},[e("p",{staticClass:"text-body-2 font-weight-medium mb-1"},[t._v("Processing your import")]),t._v(" "),e(C.a,{attrs:{indeterminate:"",color:"primary",height:"2"}}),t._v(" "),e("p",{staticClass:"text-caption grey--text mb-0 mt-1"},[t._v("Validating and importing items...")])],1)],1)]):t._e()],1),t._v(" "),e(v.c,[t.importResult&&!t.uploading?e("div",[e(l.a,{staticClass:"result-card mb-4",attrs:{color:t.importResult.success?"success":"warning",dark:""}},[e(c.b,{staticClass:"pa-4"},[e("div",{staticClass:"d-flex align-center"},[e(x.a,{staticClass:"mr-3",attrs:{large:""}},[t._v("\n                "+t._s(t.importResult.success?"mdi-check-circle":"mdi-alert")+"\n              ")]),t._v(" "),e("div",[e("p",{staticClass:"text-subtitle-2 font-weight-medium mb-1"},[t._v("\n                  "+t._s(t.importResult.success?"Import Completed":"Import Completed with Errors")+"\n                ")]),t._v(" "),e("p",{staticClass:"text-caption mb-0",staticStyle:{opacity:"0.9"}},[t._v("\n                  "+t._s(t.importResult.message)+"\n                ")])])],1)])],1),t._v(" "),t.importResult.stats?e(y.a,{staticClass:"mb-4",attrs:{dense:""}},[e(m.a,{attrs:{cols:"6"}},[e(l.a,{staticClass:"stat-card",attrs:{outlined:""}},[e(c.b,{staticClass:"text-center pa-3"},[e(x.a,{staticClass:"mb-2",attrs:{color:"success",size:"32"}},[t._v("mdi-check-circle")]),t._v(" "),e("div",{staticClass:"stat-number success--text"},[t._v(t._s(t.importResult.stats.imported))]),t._v(" "),e("div",{staticClass:"stat-title"},[t._v("Successfully Imported")]),t._v(" "),e("div",{staticClass:"stat-subtitle"},[t._v("Items added to system")])],1)],1)],1),t._v(" "),e(m.a,{attrs:{cols:"6"}},[e(l.a,{staticClass:"stat-card",attrs:{outlined:""}},[e(c.b,{staticClass:"text-center pa-3"},[e(x.a,{staticClass:"mb-2",attrs:{color:"error",size:"32"}},[t._v("mdi-alert-circle")]),t._v(" "),e("div",{staticClass:"stat-number error--text"},[t._v(t._s(t.importResult.stats.failed))]),t._v(" "),e("div",{staticClass:"stat-title"},[t._v("Failed to Import")]),t._v(" "),e("div",{staticClass:"stat-subtitle"},[t._v("Rows with errors")])],1)],1)],1)],1):t._e(),t._v(" "),t.importResult.stats&&t.importResult.stats.errors&&t.importResult.stats.errors.length>0?e(l.a,{staticClass:"error-card mb-3",attrs:{outlined:""}},[e(c.c,{staticClass:"text-subtitle-2 py-2 px-3 grey lighten-4"},[e(x.a,{staticClass:"mr-2",attrs:{small:"",color:"error"}},[t._v("mdi-alert")]),t._v("\n            Error Details ("+t._s(t.importResult.stats.errors.length)+")\n          ")],1),t._v(" "),e(f.a),t._v(" "),e(c.b,{staticClass:"pa-0"},[e("div",{staticClass:"error-list"},t._l(t.importResult.stats.errors.slice(0,5),(function(n,r){return e("div",{key:r,staticClass:"error-item pa-3"},[e("div",{staticClass:"d-flex align-start"},[e(d.a,{staticClass:"mr-2 mt-1",attrs:{"x-small":""}},[t._v(t._s(r+1))]),t._v(" "),e("span",{staticClass:"text-caption"},[t._v(t._s(n))])],1)])})),0),t._v(" "),t.importResult.stats.errors.length>5?e("div",{staticClass:"text-center pa-2 grey lighten-5"},[e("span",{staticClass:"text-caption grey--text"},[t._v("\n                +"+t._s(t.importResult.stats.errors.length-5)+" more errors not shown\n              ")])]):t._e()])],1):t._e(),t._v(" "),e("div",{staticClass:"d-flex justify-space-between align-center"},[e(o.a,{staticClass:"text-none",attrs:{text:"",color:"primary"},on:{click:t.resetForm}},[e(x.a,{attrs:{left:"",small:""}},[t._v("mdi-refresh")]),t._v("\n            Import Another File\n          ")],1),t._v(" "),e(o.a,{staticClass:"text-none",attrs:{text:"",color:"grey"},on:{click:t.closeDialog}},[t._v("\n            Done\n          ")])],1)],1):t._e()])],1)],1)}),[],!1,null,"23252fb4",null);e.default=component.exports}}]);